import{u as St,a as Ke,b as et,_ as J,C as Bt,T as Tt,c as Mt,d as Pt,e as Ot}from"./groupBy-B5JDjmjc.js";import{t as Z,u as tt,n as ve,o as Dt,a as rt,b as Rt,w as ne,g as At,p as at,r as F,d as N,c as Ce,e as ot,f as h,T as nt,h as st,i as $e,j as It,k as lt,l as Ie,v as je,m as ke,q as we,s as O,x as Ee,y as jt,F as q,z as Ae,A as Se,H as Et,I as zt,B as Vt,C as Lt,D as qt,E as Nt,G as Xe,J as Ht,K as Yt,_ as W,L as H,M as Ut,N as x,O as T,P as S,Q as P,R,S as ge,U as I,V as Ft,W as Wt,X,Y as G,Z as Be,$ as Gt,a0 as Kt,a1 as Xt}from"./index-DfSfAmJg.js";import{u as ze,C as it,c as dt,d as U,g as Zt,f as ut,S as Jt,r as Qt}from"./index-9J0OcJMf.js";import{T as ct}from"./index-BKD0l-A5.js";import{P as er}from"./on-popup-reopen-DBlk2QAn.js";import{c as tr}from"./interceptor-CR4HCnZu.js";import{r as rr,C as Te,c as oe,L as ar}from"./LineChart-DSbpwIdc.js";import{C as or,T as nr}from"./TimeHeatmapChart-B9v-fgVb.js";let sr=2e3;const lr=()=>++sr,ir={show:Boolean,zIndex:ve,overlay:Z,duration:ve,teleport:[String,Object],lockScroll:Z,lazyRender:Z,beforeClose:Function,overlayProps:Object,overlayStyle:Object,overlayClass:tt,transitionAppear:Boolean,closeOnClickOverlay:Z};let fe=0;const Ze="van-overflow-hidden";function dr(a,d){const u=St(),f="01",v="10",p=_=>{u.move(_);const k=u.deltaY.value>0?v:f,$=At(_.target,a.value),{scrollHeight:M,offsetHeight:j,scrollTop:D}=$;let A="11";D===0?A=j>=M?"00":"01":D+j>=M&&(A="10"),A!=="11"&&u.isVertical()&&!(parseInt(A,2)&parseInt(k,2))&&at(_,!0)},i=()=>{document.addEventListener("touchstart",u.start),document.addEventListener("touchmove",p,{passive:!1}),fe||document.body.classList.add(Ze),fe++},c=()=>{fe&&(document.removeEventListener("touchstart",u.start),document.removeEventListener("touchmove",p),fe--,fe||document.body.classList.remove(Ze))},m=()=>d()&&i(),g=()=>d()&&c();Dt(m),rt(g),Rt(g),ne(d,_=>{_?i():c()})}function Ve(a){const d=F(!1);return ne(a,u=>{u&&(d.value=u)},{immediate:!0}),u=>()=>d.value?u():null}const[ur,cr]=Ce("overlay"),fr={show:Boolean,zIndex:ve,duration:ve,className:tt,lockScroll:Z,lazyRender:Z,customStyle:Object,teleport:[String,Object]};var vr=N({name:ur,inheritAttrs:!1,props:fr,setup(a,{attrs:d,slots:u}){const f=F(),v=Ve(()=>a.show||!a.lazyRender),p=c=>{a.lockScroll&&at(c,!0)},i=v(()=>{var c;const m=$e(It(a.zIndex),a.customStyle);return lt(a.duration)&&(m.animationDuration=`${a.duration}s`),Ie(h("div",ke({ref:f,style:m,class:[cr(),a.className]},d),[(c=u.default)==null?void 0:c.call(u)]),[[je,a.show]])});return ot("touchmove",p,{target:f}),()=>{const c=h(nt,{name:"van-fade",appear:!0},{default:i});return a.teleport?h(st,{to:a.teleport},{default:()=>[c]}):c}}});const pr=we(vr),yr=$e({},ir,{round:Boolean,position:Ae("center"),closeIcon:Ae("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:Ae("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[hr,Je]=Ce("popup");var mr=N({name:hr,inheritAttrs:!1,props:yr,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(a,{emit:d,attrs:u,slots:f}){let v,p;const i=F(),c=F(),m=Ve(()=>a.show||!a.lazyRender),g=O(()=>{const y={zIndex:i.value};if(lt(a.duration)){const z=a.position==="center"?"animationDuration":"transitionDuration";y[z]=`${a.duration}s`}return y}),_=()=>{v||(v=!0,i.value=a.zIndex!==void 0?+a.zIndex:lr(),d("open"))},k=()=>{v&&tr(a.beforeClose,{done(){v=!1,d("close"),d("update:show",!1)}})},$=y=>{d("clickOverlay",y),a.closeOnClickOverlay&&k()},M=()=>{if(a.overlay){const y=$e({show:a.show,class:a.overlayClass,zIndex:i.value,duration:a.duration,customStyle:a.overlayStyle,role:a.closeOnClickOverlay?"button":void 0,tabindex:a.closeOnClickOverlay?0:void 0},a.overlayProps);return h(pr,ke(y,Ke(),{onClick:$}),{default:f["overlay-content"]})}},j=y=>{d("clickCloseIcon",y),k()},D=()=>{if(a.closeable)return h(zt,{role:"button",tabindex:0,name:a.closeIcon,class:[Je("close-icon",a.closeIconPosition),Et],classPrefix:a.iconPrefix,onClick:j},null)};let A;const V=()=>{A&&clearTimeout(A),A=setTimeout(()=>{d("opened")})},E=()=>d("closed"),Q=y=>d("keydown",y),le=m(()=>{var y;const{destroyOnClose:z,round:ie,position:ae,safeAreaInsetTop:pe,safeAreaInsetBottom:Pe,show:ye}=a;if(!(!ye&&z))return Ie(h("div",ke({ref:c,style:g.value,role:"dialog",tabindex:0,class:[Je({round:ie,[ae]:ae}),{"van-safe-area-top":pe,"van-safe-area-bottom":Pe}],onKeydown:Q},u,Ke()),[(y=f.default)==null?void 0:y.call(f),D()]),[[je,ye]])}),re=()=>{const{position:y,transition:z,transitionAppear:ie}=a,ae=y==="center"?"van-fade":`van-popup-slide-${y}`;return h(nt,{name:z||ae,appear:ie,onAfterEnter:V,onAfterLeave:E},{default:le})};return ne(()=>a.show,y=>{y&&!v&&(_(),u.tabindex===0&&Se(()=>{var z;(z=c.value)==null||z.focus()})),!y&&v&&(v=!1,d("close"))}),ze({popupRef:c}),dr(c,()=>a.show&&a.lockScroll),ot("popstate",()=>{a.closeOnPopstate&&(k(),p=!1)}),Ee(()=>{a.show&&_()}),jt(()=>{p&&(d("update:show",!0),p=!1)}),rt(()=>{a.show&&a.teleport&&(k(),p=!0)}),Vt(er,()=>a.show),()=>a.teleport?h(st,{to:a.teleport},{default:()=>[M(),re()]}):h(q,null,[M(),re()])}});const br=we(mr),[ft,_r]=Ce("collapse"),vt=Symbol(ft),gr={border:Z,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var xr=N({name:ft,props:gr,emits:["change","update:modelValue"],setup(a,{emit:d,slots:u}){const{linkChildren:f,children:v}=Lt(vt),p=g=>{d("change",g),d("update:modelValue",g)},i=(g,_)=>{const{accordion:k,modelValue:$}=a;p(k?g===$?"":g:_?$.concat(g):$.filter(M=>M!==g))},c=(g={})=>{if(a.accordion)return;typeof g=="boolean"&&(g={expanded:g});const{expanded:_,skipDisabled:k}=g,M=v.filter(j=>j.disabled&&k?j.expanded.value:_??!j.expanded.value).map(j=>j.itemName.value);p(M)},m=g=>{const{accordion:_,modelValue:k}=a;return _?k===g:k.includes(g)};return ze({toggleAll:c}),f({toggle:i,isExpanded:m}),()=>{var g;return h("div",{class:[_r(),{[qt]:a.border}]},[(g=u.default)==null?void 0:g.call(u)])}}});const kr=we(xr),[Cr,_e]=Ce("collapse-item"),$r=["icon","title","value","label","right-icon"],wr=$e({},dt,{name:ve,isLink:Z,disabled:Boolean,readonly:Boolean,lazyRender:Z});var Sr=N({name:Cr,props:wr,setup(a,{slots:d}){const u=F(),f=F(),{parent:v,index:p}=Nt(vt);if(!v)return;const i=O(()=>{var D;return(D=a.name)!=null?D:p.value}),c=O(()=>v.isExpanded(i.value)),m=F(c.value),g=Ve(()=>m.value||!a.lazyRender),_=()=>{c.value?u.value&&(u.value.style.height=""):m.value=!1};ne(c,(D,A)=>{if(A===null)return;D&&(m.value=!0),(D?Se:Ht)(()=>{if(!f.value||!u.value)return;const{offsetHeight:E}=f.value;if(E){const Q=`${E}px`;u.value.style.height=D?"0":Q,Yt(()=>{u.value&&(u.value.style.height=D?Q:"0")})}else _()})});const k=(D=!c.value)=>{v.toggle(i.value,D)},$=()=>{!a.disabled&&!a.readonly&&k()},M=()=>{const{border:D,disabled:A,readonly:V}=a,E=Xe(a,Object.keys(dt));return V&&(E.isLink=!1),(A||V)&&(E.clickable=!1),h(it,ke({role:"button",class:_e("title",{disabled:A,expanded:c.value,borderless:!D}),"aria-expanded":String(c.value),onClick:$},E),Xe(d,$r))},j=g(()=>{var D;return Ie(h("div",{ref:u,class:_e("wrapper"),onTransitionend:_},[h("div",{ref:f,class:_e("content")},[(D=d.default)==null?void 0:D.call(d)])]),[[je,m.value]])});return ze({toggle:k,expanded:c,itemName:i}),()=>h("div",{class:[_e({border:p.value&&a.border})]},[M(),j()])}});const Br=we(Sr),Tr=N({components:{VanCell:it,VanTag:ct},props:{record:{type:Object,required:!0},format:{type:String,default:"YYYY/MM/DD HH:mm"},size:{type:String,default:"large"},hideTitle:{type:Boolean,default:!1},index:{type:Number}},setup(a){function d(u){return U(u).format(a.format)}return{formatDateTime:d}}}),Mr={class:"mr-3 bg-gray-100 rounded-full w-7 h-7 text-xs flex items-center justify-center font-medium"},Pr={key:0,class:"font-normal"},Or={class:"mb-2"},Dr={class:"text-sm"},Rr={class:"text-xs mt-2"},Ar={class:"text-right text-gray-500 ml-1"},Ir={class:"text-xs"};function jr(a,d,u,f,v,p){const i=T("VanTag"),c=T("VanCell");return S(),H(c,{center:"",border:"",size:a.size},Ut({title:x(()=>[a.hideTitle?Ft("",!0):(S(),I("div",Pr,R(a.record.title),1))]),label:x(()=>[P("div",Or,[h(i,{class:"mr-2",plain:"",type:"default"},{default:x(()=>[ge(R(a.record.area),1)]),_:1}),h(i,{class:"mr-2",plain:"",type:"primary"},{default:x(()=>[ge(R(a.record.version),1)]),_:1}),h(i,{plain:"",type:"success"},{default:x(()=>[ge(R(a.record.theater),1)]),_:1})]),P("div",Dr,R(a.record.memo),1),P("div",Rr,R(a.formatDateTime(a.record.date)),1)]),extra:x(()=>[P("div",Ar,[P("div",null,"x "+R(a.record.tickets),1),P("div",Ir," $ "+R(a.record.cost),1)])]),_:2},[a.index?{name:"icon",fn:x(()=>[P("span",Mr,R(a.index),1)]),key:"0"}:void 0]),1032,["size"])}const pt=W(Tr,[["render",jr]]),Er=N({components:{VanPopup:br,MovieRecordCell:pt},props:{records:{type:Array,required:!0}},emits:["update:records"],setup(a,{emit:d}){return{show:O({get(){return a.records.length>0},set(f){f||d("update:records",[])}})}}}),zr={class:"pb-8 overflow-y-auto h-calc"};function Vr(a,d,u,f,v,p){const i=T("MovieRecordCell"),c=T("VanPopup");return S(),H(c,{show:a.show,"onUpdate:show":d[0]||(d[0]=m=>a.show=m),round:"",position:"bottom",style:{height:"90%"},closeable:""},{default:x(()=>[Wt(a.$slots,"title",{},void 0,!0),P("div",zr,[(S(!0),I(q,null,X(a.records,(m,g)=>(S(),H(i,{key:`${m.date}_${m.title}`,record:m,index:a.records.length-g},null,8,["record","index"]))),128))])]),_:3},8,["show"])}const se=W(Er,[["render",Vr],["__scopeId","data-v-febc9fa5"]]);var xe={exports:{}};/*!
 * chartjs-plugin-datalabels v0.7.0
 * https://chartjs-plugin-datalabels.netlify.com
 * (c) 2019 Chart.js Contributors
 * Released under the MIT license
 */var Lr=xe.exports,Qe;function qr(){return Qe||(Qe=1,(function(a,d){(function(u,f){a.exports=f(rr())})(Lr,function(u){u=u&&u.hasOwnProperty("default")?u.default:u;var f=u.helpers,v=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1})(),p={toTextLines:function(e){var o=[],t;for(e=[].concat(e);e.length;)t=e.pop(),typeof t=="string"?o.unshift.apply(o,t.split(`
`)):Array.isArray(t)?e.push.apply(e,t):f.isNullOrUndef(e)||o.unshift(""+t);return o},toFontString:function(e){return!e||f.isNullOrUndef(e.size)||f.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family},textSize:function(e,o,t){var r=[].concat(o),n=r.length,s=e.font,l=0,b;for(e.font=t.string,b=0;b<n;++b)l=Math.max(e.measureText(r[b]).width,l);return e.font=s,{height:n*t.lineHeight,width:l}},parseFont:function(e){var o=u.defaults.global,t=f.valueOrDefault(e.size,o.defaultFontSize),r={family:f.valueOrDefault(e.family,o.defaultFontFamily),lineHeight:f.options.toLineHeight(e.lineHeight,t),size:t,style:f.valueOrDefault(e.style,o.defaultFontStyle),weight:f.valueOrDefault(e.weight,null),string:""};return r.string=p.toFontString(r),r},bound:function(e,o,t){return Math.max(e,Math.min(o,t))},arrayDiff:function(e,o){var t=e.slice(),r=[],n,s,l,b;for(n=0,l=o.length;n<l;++n)b=o[n],s=t.indexOf(b),s===-1?r.push([b,1]):t.splice(s,1);for(n=0,l=t.length;n<l;++n)r.push([t[n],-1]);return r},rasterize:function(e){return Math.round(e*v)/v}};function i(e,o){var t=o.x,r=o.y;if(t===null)return{x:0,y:-1};if(r===null)return{x:1,y:0};var n=e.x-t,s=e.y-r,l=Math.sqrt(n*n+s*s);return{x:l?n/l:0,y:l?s/l:-1}}function c(e,o,t,r,n){switch(n){case"center":t=r=0;break;case"bottom":t=0,r=1;break;case"right":t=1,r=0;break;case"left":t=-1,r=0;break;case"top":t=0,r=-1;break;case"start":t=-t,r=-r;break;case"end":break;default:n*=Math.PI/180,t=Math.cos(n),r=Math.sin(n);break}return{x:e,y:o,vx:t,vy:r}}var m=0,g=1,_=2,k=4,$=8;function M(e,o,t){var r=m;return e<t.left?r|=g:e>t.right&&(r|=_),o<t.top?r|=$:o>t.bottom&&(r|=k),r}function j(e,o){for(var t=e.x0,r=e.y0,n=e.x1,s=e.y1,l=M(t,r,o),b=M(n,s,o),C,w,B;!(!(l|b)||l&b);)C=l||b,C&$?(w=t+(n-t)*(o.top-r)/(s-r),B=o.top):C&k?(w=t+(n-t)*(o.bottom-r)/(s-r),B=o.bottom):C&_?(B=r+(s-r)*(o.right-t)/(n-t),w=o.right):C&g&&(B=r+(s-r)*(o.left-t)/(n-t),w=o.left),C===l?(t=w,r=B,l=M(t,r,o)):(n=w,s=B,b=M(n,s,o));return{x0:t,x1:n,y0:r,y1:s}}function D(e,o){var t=o.anchor,r=e,n,s;return o.clamp&&(r=j(r,o.area)),t==="start"?(n=r.x0,s=r.y0):t==="end"?(n=r.x1,s=r.y1):(n=(r.x0+r.x1)/2,s=(r.y0+r.y1)/2),c(n,s,e.vx,e.vy,o.align)}var A={arc:function(e,o){var t=(e.startAngle+e.endAngle)/2,r=Math.cos(t),n=Math.sin(t),s=e.innerRadius,l=e.outerRadius;return D({x0:e.x+r*s,y0:e.y+n*s,x1:e.x+r*l,y1:e.y+n*l,vx:r,vy:n},o)},point:function(e,o){var t=i(e,o.origin),r=t.x*e.radius,n=t.y*e.radius;return D({x0:e.x-r,y0:e.y-n,x1:e.x+r,y1:e.y+n,vx:t.x,vy:t.y},o)},rect:function(e,o){var t=i(e,o.origin),r=e.x,n=e.y,s=0,l=0;return e.horizontal?(r=Math.min(e.x,e.base),s=Math.abs(e.base-e.x)):(n=Math.min(e.y,e.base),l=Math.abs(e.base-e.y)),D({x0:r,y0:n+l,x1:r+s,y1:n,vx:t.x,vy:t.y},o)},fallback:function(e,o){var t=i(e,o.origin);return D({x0:e.x,y0:e.y,x1:e.x,y1:e.y,vx:t.x,vy:t.y},o)}},V=u.helpers,E=p.rasterize;function Q(e){var o=e.borderWidth||0,t=e.padding,r=e.size.height,n=e.size.width,s=-n/2,l=-r/2;return{frame:{x:s-t.left-o,y:l-t.top-o,w:n+t.width+o*2,h:r+t.height+o*2},text:{x:s,y:l,w:n,h:r}}}function le(e){var o=e._model.horizontal,t=e._scale||o&&e._xScale||e._yScale;if(!t)return null;if(t.xCenter!==void 0&&t.yCenter!==void 0)return{x:t.xCenter,y:t.yCenter};var r=t.getBasePixel();return o?{x:r,y:null}:{x:null,y:r}}function re(e){return e instanceof u.elements.Arc?A.arc:e instanceof u.elements.Point?A.point:e instanceof u.elements.Rectangle?A.rect:A.fallback}function y(e,o,t){var r=t.backgroundColor,n=t.borderColor,s=t.borderWidth;!r&&(!n||!s)||(e.beginPath(),V.canvas.roundedRect(e,E(o.x)+s/2,E(o.y)+s/2,E(o.w)-s,E(o.h)-s,t.borderRadius),e.closePath(),r&&(e.fillStyle=r,e.fill()),n&&s&&(e.strokeStyle=n,e.lineWidth=s,e.lineJoin="miter",e.stroke()))}function z(e,o,t){var r=t.lineHeight,n=e.w,s=e.x,l=e.y+r/2;return o==="center"?s+=n/2:(o==="end"||o==="right")&&(s+=n),{h:r,w:n,x:s,y:l}}function ie(e,o,t){var r=e.shadowBlur,n=t.stroked,s=E(t.x),l=E(t.y),b=E(t.w);n&&e.strokeText(o,s,l,b),t.filled&&(r&&n&&(e.shadowBlur=0),e.fillText(o,s,l,b),r&&n&&(e.shadowBlur=r))}function ae(e,o,t,r){var n=r.textAlign,s=r.color,l=!!s,b=r.font,C=o.length,w=r.textStrokeColor,B=r.textStrokeWidth,L=w&&B,K;if(!(!C||!l&&!L))for(t=z(t,n,b),e.font=b.string,e.textAlign=n,e.textBaseline="middle",e.shadowBlur=r.textShadowBlur,e.shadowColor=r.textShadowColor,l&&(e.fillStyle=s),L&&(e.lineJoin="round",e.lineWidth=B,e.strokeStyle=w),K=0,C=o.length;K<C;++K)ie(e,o[K],{stroked:L,filled:l,w:t.w,x:t.x,y:t.y+t.h*K})}var pe=function(e,o,t,r){var n=this;n._config=e,n._index=r,n._model=null,n._rects=null,n._ctx=o,n._el=t};V.extend(pe.prototype,{_modelize:function(e,o,t,r){var n=this,s=n._index,l=V.options.resolve,b=p.parseFont(l([t.font,{}],r,s)),C=l([t.color,u.defaults.global.defaultFontColor],r,s);return{align:l([t.align,"center"],r,s),anchor:l([t.anchor,"center"],r,s),area:r.chart.chartArea,backgroundColor:l([t.backgroundColor,null],r,s),borderColor:l([t.borderColor,null],r,s),borderRadius:l([t.borderRadius,0],r,s),borderWidth:l([t.borderWidth,0],r,s),clamp:l([t.clamp,!1],r,s),clip:l([t.clip,!1],r,s),color:C,display:e,font:b,lines:o,offset:l([t.offset,0],r,s),opacity:l([t.opacity,1],r,s),origin:le(n._el),padding:V.options.toPadding(l([t.padding,0],r,s)),positioner:re(n._el),rotation:l([t.rotation,0],r,s)*(Math.PI/180),size:p.textSize(n._ctx,o,b),textAlign:l([t.textAlign,"start"],r,s),textShadowBlur:l([t.textShadowBlur,0],r,s),textShadowColor:l([t.textShadowColor,C],r,s),textStrokeColor:l([t.textStrokeColor,C],r,s),textStrokeWidth:l([t.textStrokeWidth,0],r,s)}},update:function(e){var o=this,t=null,r=null,n=o._index,s=o._config,l,b,C,w=V.options.resolve([s.display,!0],e,n);w&&(l=e.dataset.data[n],b=V.valueOrDefault(V.callback(s.formatter,[l,e]),l),C=V.isNullOrUndef(b)?[]:p.toTextLines(b),C.length&&(t=o._modelize(w,C,s,e),r=Q(t))),o._model=t,o._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,o){var t=this,r=e.ctx,n=t._model,s=t._rects,l;this.visible()&&(r.save(),n.clip&&(l=n.area,r.beginPath(),r.rect(l.left,l.top,l.right-l.left,l.bottom-l.top),r.clip()),r.globalAlpha=p.bound(0,n.opacity,1),r.translate(E(o.x),E(o.y)),r.rotate(n.rotation),y(r,s.frame,n),ae(r,n.lines,s.text,n),r.restore())}});var Pe=u.helpers,ye=Number.MIN_SAFE_INTEGER||-9007199254740991,yt=Number.MAX_SAFE_INTEGER||9007199254740991;function de(e,o,t){var r=Math.cos(t),n=Math.sin(t),s=o.x,l=o.y;return{x:s+r*(e.x-s)-n*(e.y-l),y:l+n*(e.x-s)+r*(e.y-l)}}function qe(e,o){var t=yt,r=ye,n=o.origin,s,l,b,C,w;for(s=0;s<e.length;++s)l=e[s],b=l.x-n.x,C=l.y-n.y,w=o.vx*b+o.vy*C,t=Math.min(t,w),r=Math.max(r,w);return{min:t,max:r}}function he(e,o){var t=o.x-e.x,r=o.y-e.y,n=Math.sqrt(t*t+r*r);return{vx:(o.x-e.x)/n,vy:(o.y-e.y)/n,origin:e,ln:n}}var Ne=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Pe.extend(Ne.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,o,t){this._rotation=t,this._rect={x:o.x+e.x,y:o.y+e.y,w:o.w,h:o.h}},contains:function(e){var o=this,t=1,r=o._rect;return e=de(e,o.center(),-o._rotation),!(e.x<r.x-t||e.y<r.y-t||e.x>r.x+r.w+t*2||e.y>r.y+r.h+t*2)},intersects:function(e){var o=this._points(),t=e._points(),r=[he(o[0],o[1]),he(o[0],o[3])],n,s,l;for(this._rotation!==e._rotation&&r.push(he(t[0],t[1]),he(t[0],t[3])),n=0;n<r.length;++n)if(s=qe(o,r[n]),l=qe(t,r[n]),s.max<l.min||l.max<s.min)return!1;return!0},_points:function(){var e=this,o=e._rect,t=e._rotation,r=e.center();return[de({x:o.x,y:o.y},r,t),de({x:o.x+o.w,y:o.y},r,t),de({x:o.x+o.w,y:o.y+o.h},r,t),de({x:o.x,y:o.y+o.h},r,t)]}});function He(e,o,t){var r=o.positioner(e,o),n=r.vx,s=r.vy;if(!n&&!s)return{x:r.x,y:r.y};var l=t.w,b=t.h,C=o.rotation,w=Math.abs(l/2*Math.cos(C))+Math.abs(b/2*Math.sin(C)),B=Math.abs(l/2*Math.sin(C))+Math.abs(b/2*Math.cos(C)),L=1/Math.max(Math.abs(n),Math.abs(s));return w*=n*L,B*=s*L,w+=o.offset*n,B+=o.offset*s,{x:r.x+w,y:r.y+B}}function ht(e,o){var t,r,n,s;for(t=e.length-1;t>=0;--t)for(n=e[t].$layout,r=t-1;r>=0&&n._visible;--r)s=e[r].$layout,s._visible&&n._box.intersects(s._box)&&o(n,s);return e}function mt(e){var o,t,r,n,s,l;for(o=0,t=e.length;o<t;++o)r=e[o],n=r.$layout,n._visible&&(s=r.geometry(),l=He(r._el._model,r.model(),s),n._box.update(l,s,r.rotation()));return ht(e,function(b,C){var w=b._hidable,B=C._hidable;w&&B||B?C._visible=!1:w&&(b._visible=!1)})}var ue={prepare:function(e){var o=[],t,r,n,s,l;for(t=0,n=e.length;t<n;++t)for(r=0,s=e[t].length;r<s;++r)l=e[t][r],o.push(l),l.$layout={_box:new Ne,_hidable:!1,_visible:!0,_set:t,_idx:r};return o.sort(function(b,C){var w=b.$layout,B=C.$layout;return w._idx===B._idx?B._set-w._set:B._idx-w._idx}),this.update(o),o},update:function(e){var o=!1,t,r,n,s,l;for(t=0,r=e.length;t<r;++t)n=e[t],s=n.model(),l=n.$layout,l._hidable=s&&s.display==="auto",l._visible=n.visible(),o|=l._hidable;o&&mt(e)},lookup:function(e,o){var t,r;for(t=e.length-1;t>=0;--t)if(r=e[t].$layout,r&&r._visible&&r._box.contains(o))return e[t];return null},draw:function(e,o){var t,r,n,s,l,b;for(t=0,r=o.length;t<r;++t)n=o[t],s=n.$layout,s._visible&&(l=n.geometry(),b=He(n._el._view,n.model(),l),s._box.update(b,l,n.rotation()),n.draw(e,b))}},me=u.helpers,bt=function(e){if(me.isNullOrUndef(e))return null;var o=e,t,r,n;if(me.isObject(e))if(!me.isNullOrUndef(e.label))o=e.label;else if(!me.isNullOrUndef(e.r))o=e.r;else for(o="",t=Object.keys(e),n=0,r=t.length;n<r;++n)o+=(n!==0?", ":"")+t[n]+": "+e[t[n]];return""+o},_t={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:bt,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},ce=u.helpers,Y="$datalabels",Ye="$default";function gt(e,o){var t=e.datalabels,r={},n=[],s,l;return t===!1?null:(t===!0&&(t={}),o=ce.merge({},[o,t]),s=o.labels||{},l=Object.keys(s),delete o.labels,l.length?l.forEach(function(b){s[b]&&n.push(ce.merge({},[o,s[b],{_key:b}]))}):n.push(o),r=n.reduce(function(b,C){return ce.each(C.listeners||{},function(w,B){b[B]=b[B]||{},b[B][C._key||Ye]=w}),delete C.listeners,b},{}),{labels:n,listeners:r})}function Oe(e,o,t){if(o){var r=t.$context,n=t.$groups,s;o[n._set]&&(s=o[n._set][n._key],s&&ce.callback(s,[r])===!0&&(e[Y]._dirty=!0,t.update(r)))}}function xt(e,o,t,r){var n,s;!t&&!r||(t?r?t!==r&&(s=n=!0):s=!0:n=!0,s&&Oe(e,o.leave,t),n&&Oe(e,o.enter,r))}function kt(e,o){var t=e[Y],r=t._listeners,n,s;if(!(!r.enter&&!r.leave)){if(o.type==="mousemove")s=ue.lookup(t._labels,o);else if(o.type!=="mouseout")return;n=t._hovered,t._hovered=s,xt(e,r,n,s)}}function Ct(e,o){var t=e[Y],r=t._listeners.click,n=r&&ue.lookup(t._labels,o);n&&Oe(e,r,n)}function $t(e){if(!e.animating){for(var o=u.animationService.animations,t=0,r=o.length;t<r;++t)if(o[t].chart===e)return;e.render({duration:1,lazy:!0})}}u.defaults.global.plugins.datalabels=_t;var Ue={id:"datalabels",beforeInit:function(e){e[Y]={_actives:[]}},beforeUpdate:function(e){var o=e[Y];o._listened=!1,o._listeners={},o._datasets=[],o._labels=[]},afterDatasetUpdate:function(e,o,t){var r=o.index,n=e[Y],s=n._datasets[r]=[],l=e.isDatasetVisible(r),b=e.data.datasets[r],C=gt(b,t),w=o.meta.data||[],B=e.ctx,L,K,Fe,We,De,Ge,ee,te;for(B.save(),L=0,Fe=w.length;L<Fe;++L)if(ee=w[L],ee[Y]=[],l&&ee&&!ee.hidden&&!ee._model.skip)for(K=0,We=C.labels.length;K<We;++K)De=C.labels[K],Ge=De._key,te=new pe(De,B,ee,L),te.$groups={_set:r,_key:Ge||Ye},te.$context={active:!1,chart:e,dataIndex:L,dataset:b,datasetIndex:r},te.update(te.$context),ee[Y].push(te),s.push(te);B.restore(),ce.merge(n._listeners,C.listeners,{merger:function(be,Re,wt){Re[be]=Re[be]||{},Re[be][o.index]=wt[be],n._listened=!0}})},afterUpdate:function(e,o){e[Y]._labels=ue.prepare(e[Y]._datasets,o)},afterDatasetsDraw:function(e){ue.draw(e,e[Y]._labels)},beforeEvent:function(e,o){if(e[Y]._listened)switch(o.type){case"mousemove":case"mouseout":kt(e,o);break;case"click":Ct(e,o);break}},afterEvent:function(e){var o=e[Y],t=o._actives,r=o._actives=e.lastActive||[],n=p.arrayDiff(t,r),s,l,b,C,w,B,L;for(s=0,l=n.length;s<l;++s)if(w=n[s],w[1])for(L=w[0][Y]||[],b=0,C=L.length;b<C;++b)B=L[b],B.$context.active=w[1]===1,B.update(B.$context);(o._dirty||n.length)&&(ue.update(o._labels),$t(e)),delete o._dirty}};return u.plugins.register(Ue),Ue})})(xe)),xe.exports}var Nr=qr();const Me=Zt(Nr);Te.plugins.unregister(Me);const Hr=N({props:{id:{type:String,required:!0},title:{type:String},data:{type:Array,required:!0},labels:{type:Array,required:!0}},emits:["pieClick"],setup(a,{emit:d}){const u=F(null),f=et("(min-width: 768px)");ne(()=>a.data,()=>{v()}),Ee(()=>{v()});async function v(){await Se(),u.value&&u.value.clear();const p=document.getElementById(a.id).getContext("2d");u.value=new Te(p,{plugins:[Me],type:"pie",data:{datasets:[{data:a.data,backgroundColor:oe}],labels:a.labels},options:{responsive:!0,aspectRatio:f.value?1.5:a.labels.length>10?.7:1,title:{display:!!a.title,text:a.title},tooltips:{callbacks:{label(i,c){const m=i.index,g=a.data[m],_=a.data.reduce(($,M)=>$+=+M,0),k=g/_*100;return`${c.labels?.[m]}: ${g} (${k.toFixed(0)}%)`}}},plugins:{datalabels:{color:"#000000",textStrokeColor:"#ffffff",textStrokeWidth:3,formatter(i){const c=a.data.reduce((g,_)=>g+=+_,0);return i/c*100<10?"":i}}},onClick(i,c){const m=c?.[0]?._index,g=c?.[0]?._view?.label;Number.isNaN(m)||d("pieClick",{index:m,label:g})}}})}return{}}}),Yr=["id"];function Ur(a,d,u,f,v,p){return S(),I("canvas",{id:a.id,key:a.id},null,8,Yr)}const Fr=W(Hr,[["render",Ur]]),Wr=N({components:{PieChart:Fr,MovieRecordsPopup:se},props:{id:{type:String,default:"js-area-pie"},records:{type:Array,required:!0}},setup(a){const d=O(()=>J(a.records,p=>p.area)),u=G({data:O(()=>Object.keys(d.value).map(p=>d.value[p].length)),labels:O(()=>Object.keys(d.value))}),f=G({label:"",records:[]});function v({label:p}){f.label=p,f.records=d.value[p]}return{dataset:u,areaDetails:f,onClick:v}}}),Gr={class:"text-center py-2"};function Kr(a,d,u,f,v,p){const i=T("PieChart"),c=T("MovieRecordsPopup");return S(),I(q,null,[h(i,{id:a.id,data:a.dataset.data,labels:a.dataset.labels,onPieClick:a.onClick},null,8,["id","data","labels","onPieClick"]),h(c,{records:a.areaDetails.records,"onUpdate:records":d[0]||(d[0]=m=>a.areaDetails.records=m)},{title:x(()=>[P("div",Gr,R(a.areaDetails.label),1)]),_:1},8,["records"])],64)}const Xr=W(Wr,[["render",Kr]]);Te.plugins.unregister(Me);const Zr=N({props:{id:{type:String,required:!0},data:{type:Array,required:!0},labels:{type:Array,required:!0},title:{type:String},type:{type:String,default:"bar"}},emits:["barClick"],setup(a,{emit:d}){const u=F(null),f=et("(min-width: 768px)");ne(()=>a.data,()=>{v()}),Ee(()=>{v()});async function v(){await Se(),u.value&&u.value.clear();const p=document.getElementById(a.id).getContext("2d");u.value=new Te(p,{plugins:[Me],type:a.type,data:{datasets:[{data:a.data,backgroundColor:oe}],labels:a.labels},options:{responsive:!0,aspectRatio:f.value?1.5:.8,title:{display:!!a.title,text:a.title},legend:{display:!1},tooltips:{enabled:!1},scales:{yAxes:[{ticks:{min:0,stepSize:1}}],xAxes:[{ticks:{min:0,stepSize:1}}]},plugins:{datalabels:{textAlign:"end",align:"center",color:"#000000",textStrokeColor:"#ffffff",textStrokeWidth:3,formatter(i){return i>0?i:""}}},onClick(i,c){const m=c?.[0]?._index,g=c?.[0]?._view?.label;Number.isNaN(m)||d("barClick",{index:m,label:g})}}})}return{}}}),Jr=["id"];function Qr(a,d,u,f,v,p){return S(),I("canvas",{id:a.id,key:a.id},null,8,Jr)}const Le=W(Zr,[["render",Qr]]),ea=N({components:{BarChart:Le,MovieRecordsPopup:se},props:{id:{type:String,required:!0},records:{type:Array,required:!0}},setup(a){const d=Array.from({length:12}).fill("").map((c,m)=>m),u=F(0),f=F([]),v=O(()=>J(a.records,c=>U(c.date).month())),p=G({data:O(()=>{const c=Object.keys(v.value).map(m=>({month:+m,value:v.value[m].length}));return d.map(m=>c.find(g=>g.month===m)?.value??0)}),labels:d.map(c=>U().month(c).format("MMM"))});function i({index:c}){u.value=c+1,f.value=v.value[c]}return{...Be(p),showMonth:u,showRecords:f,onClick:i}}}),ta={class:"text-center py-2"};function ra(a,d,u,f,v,p){const i=T("BarChart"),c=T("MovieRecordsPopup");return S(),I(q,null,[h(i,{id:a.id,data:a.data,labels:a.labels,onBarClick:a.onClick},null,8,["id","data","labels","onBarClick"]),h(c,{records:a.showRecords,"onUpdate:records":d[0]||(d[0]=m=>a.showRecords=m)},{title:x(()=>[P("div",ta,R(a.showMonth)+"月 ",1)]),_:1},8,["records"])],64)}const aa=W(ea,[["render",ra]]),oa=N({components:{ContributionChart:or,MovieRecordsPopup:se},props:{id:{type:String,default:"js-contribution"},records:{type:Array,required:!0}},setup(a){const d=O(()=>J(a.records,i=>U(i.date).dayOfYear())),u=G({contributions:O(()=>{const i=U(a.records[0].date).startOf("year"),c=i.isLeapYear()?366:365,m=i.isoWeekday()%7;return Array.from({length:m}).fill("").map(()=>({date:"",value:-1,records:[]})).concat(Array.from({length:c}).fill("").map((g,_)=>{const k=i.add(_,"day"),$=d.value[_+1]?.length??0,M=d.value[_+1]||[];return{date:k.toISOString(),value:$,records:M}}))})}),f=G({date:"",records:[]});function v({date:i,records:c}){f.date=i,f.records=c}function p(i){return U(i).format("YYYY/MM/DD (ddd)")}return{...Be(u),dayDetails:f,formatDate:p,onClick:v}}}),na={class:"text-center py-2"};function sa(a,d,u,f,v,p){const i=T("ContributionChart"),c=T("MovieRecordsPopup");return S(),I(q,null,[(S(),H(i,{id:a.id,key:a.id,contributions:a.contributions,onBlockClick:a.onClick},null,8,["id","contributions","onBlockClick"])),h(c,{records:a.dayDetails.records,"onUpdate:records":d[0]||(d[0]=m=>a.dayDetails.records=m)},{title:x(()=>[P("div",na,R(a.formatDate(a.dayDetails.date)),1)]),_:1},8,["records"])],64)}const la=W(oa,[["render",sa]]),ia=N({components:{LineChart:ar},props:{id:{type:String,default:"js-line"},records:{type:Array,required:!0}},setup(a){const d=O(()=>{const v=J(a.records,p=>U(p.date).year());return Object.keys(v).map(p=>({id:+p,records:v[p]}))}),u=O(()=>[{type:"line",label:"總票數",data:d.value.map(v=>v.records.reduce((p,i)=>p+=i.tickets,0)),borderColor:oe[3],backgroundColor:oe[3],fill:!1},{type:"line",label:"總場數",data:d.value.map(v=>v.records.length),borderColor:oe[2],backgroundColor:oe[2],fill:!1}]),f=O(()=>d.value.map(v=>`${v.id}`));return{datasets:u,labels:f}}});function da(a,d,u,f,v,p){const i=T("LineChart");return S(),H(i,{id:a.id,key:a.id,datasets:a.datasets,labels:a.labels},null,8,["id","datasets","labels"])}const ua=W(ia,[["render",da]]),ca=N({components:{TimeHeatmapChart:nr,MovieRecordsPopup:se},props:{id:{type:String,default:"js-heatmap"},records:{type:Array,required:!0}},setup(a){const d=O(()=>{const i=J(a.records,m=>U(m.date).weekday()),c=[];return Array.from({length:7}).fill("").forEach((m,g)=>{Array.from({length:24}).fill("").forEach((_,k)=>{const $=i[g]?.filter(j=>U(j.date).isSame(U(j.date).hour(k),"hour")),M=$?.length??0;c.push({weekday:+g,hour:k,value:M,records:$})})}),c}),u=G({weekday:0,hour:0,records:[]});function f(i){return U().weekday(i).format("ddd")}function v(i){const c=U().startOf("day");return`${c.hour(i).format("HH:mm")}~${c.hour(i+1).format("HH:mm")}`}function p(i){u.weekday=i.weekday,u.hour=i.hour,u.records=i.records}return{dataset:d,dayDetails:u,formatDate:ut,formatWeekDay:f,formatHour:v,onClick:p}}}),fa={class:"text-center py-2"};function va(a,d,u,f,v,p){const i=T("TimeHeatmapChart"),c=T("MovieRecordsPopup");return S(),I(q,null,[h(i,{id:a.id,dataset:a.dataset,onBlockClick:a.onClick},null,8,["id","dataset","onBlockClick"]),h(c,{records:a.dayDetails.records,"onUpdate:records":d[0]||(d[0]=m=>a.dayDetails.records=m)},{title:x(()=>[P("div",fa,[P("div",null,R(a.formatWeekDay(a.dayDetails.weekday))+" "+R(a.formatHour(a.dayDetails.hour)),1)])]),_:1},8,["records"])],64)}const pa=W(ca,[["render",va]]),ya=N({components:{BarChart:Le,MovieRecordsPopup:se},props:{id:{type:String,default:"js-theater-bar"},records:{type:Array,required:!0}},setup(a){const d=O(()=>J(a.records,i=>i.theater)),u=O(()=>Object.keys(d.value).map(i=>({label:i,data:d.value[i].length})).sort((i,c)=>i.data<c.data?1:-1)),f=G({data:O(()=>u.value.map(i=>i.data)),labels:O(()=>u.value.map(i=>i.label))}),v=G({label:"",records:[]});function p({label:i}){v.label=i,v.records=d.value[i]}return{dataset:f,theaterDetails:v,onClick:p}}}),ha={class:"text-center py-2"};function ma(a,d,u,f,v,p){const i=T("BarChart"),c=T("MovieRecordsPopup");return S(),I(q,null,[(S(),H(i,{id:a.id,key:a.id,type:"horizontalBar",data:a.dataset.data,labels:a.dataset.labels,onBarClick:a.onClick},null,8,["id","data","labels","onBarClick"])),h(c,{records:a.theaterDetails.records,"onUpdate:records":d[0]||(d[0]=m=>a.theaterDetails.records=m)},{title:x(()=>[P("div",ha,R(a.theaterDetails.label),1)]),_:1},8,["records"])],64)}const ba=W(ya,[["render",ma]]),_a=N({props:{records:{type:Array,required:!0}},setup(a){const d=G({totalCount:O(()=>a.records.length),totalCost:O(()=>a.records.reduce((u,f)=>u+=f.cost,0)),totalTicks:O(()=>a.records.reduce((u,f)=>u+=f.tickets,0))});return{...Be(d)}}}),ga={class:"text-xs"};function xa(a,d,u,f,v,p){return S(),I("div",ga," 看了 "+R(a.totalCount)+" 場電影，一共 "+R(a.totalTicks)+" 張電影票，花了 "+R(a.totalCost.toLocaleString())+" 新台幣 ",1)}const ka=W(_a,[["render",xa]]),Ca=N({components:{BarChart:Le,MovieRecordsPopup:se},props:{id:{type:String,required:!0},records:{type:Array,required:!0}},setup(a){const d=O(()=>J(a.records,i=>i.version)),u=O(()=>Object.keys(d.value).map(i=>({label:i,data:d.value[i].length})).sort((i,c)=>i.data<c.data?1:-1)),f=G({data:O(()=>u.value.map(i=>i.data)),labels:O(()=>u.value.map(i=>i.label))}),v=G({label:"",records:[]});function p({label:i}){v.label=i,v.records=d.value[i]}return{...Be(f),versionDetails:v,onClick:p}}}),$a={class:"text-center py-2"};function wa(a,d,u,f,v,p){const i=T("BarChart"),c=T("MovieRecordsPopup");return S(),I(q,null,[h(i,{id:a.id,type:"horizontalBar",data:a.data,labels:a.labels,onBarClick:a.onClick},null,8,["id","data","labels","onBarClick"]),h(c,{records:a.versionDetails.records,"onUpdate:records":d[0]||(d[0]=m=>a.versionDetails.records=m)},{title:x(()=>[P("div",$a,R(a.versionDetails.label),1)]),_:1},8,["records"])],64)}const Sa=W(Ca,[["render",wa]]),Ba=N({components:{VanTabs:Mt,VanTab:Tt,VanSkeleton:Jt,VanCellGroup:Bt,VanCollapse:kr,VanCollapseItem:Br,VanTag:ct,MovieRecordCell:pt,FrequencyBarChart:aa,MovieTimeHeatmapChart:pa,TotalAnalytics:ka,AreaPieChart:Xr,TheaterBarChart:ba,VersionBarChart:Sa,MovieContributionChart:la,MovieLineChart:ua},setup(){const a=Gt(),d=Pt(),{state:u,isReady:f}=Ot(Qt("movie"),{success:!1,resultMessage:"",resultCode:"",resultException:"",items:[]}),v=F(a.query.tab?.toString()||"data"),p=F(""),i=F(U().year()),c=O(()=>u.value.items),m=O(()=>{const k=J(c.value,$=>U($.date).year());return Object.keys(k).sort(($,M)=>+$>+M?-1:1).map($=>({id:+$,records:k[$]}))}),g=O(()=>m.value.find(k=>k.id===i.value)),_=O(()=>{const k=J(c.value,$=>$.title);return Object.keys(k).map($=>({title:$,count:k[$].length,records:c.value.filter(M=>$===M.title)})).filter($=>$.count>1).sort(($,M)=>$.count>M.count?-1:1)});return Kt(()=>{d.value=`Log | Movie | ${v.value}`}),{isReady:f,activeTab:v,activeCollapse:p,records:c,arrayByYear:m,arrayByTitle:_,filterYear:i,filterArrayByYear:g,formatDate:ut}}}),Ta={class:"text-center my-2"},Ma={class:"max-w-2xl mx-auto"},Pa={class:"text-center"},Oa={class:"mt-3 mb-1"},Da={class:"max-w-2xl mx-auto px-2"},Ra={class:"text-center text-xs my-2"},Aa={class:"max-w-2xl mx-auto px-2"},Ia={class:"max-w-2xl mx-auto px-2"},ja={class:"max-w-2xl mx-auto px-2"},Ea={class:"max-w-2xl mx-auto px-2"},za={class:"max-w-2xl mx-auto"},Va={class:"flex items-center"},La={class:"text-xs"},qa={class:"-mx-3 -my-4"};function Na(a,d,u,f,v,p){const i=T("TotalAnalytics"),c=T("MovieContributionChart"),m=T("MovieRecordCell"),g=T("VanCellGroup"),_=T("VanTab"),k=T("VanTabs"),$=T("MovieLineChart"),M=T("FrequencyBarChart"),j=T("MovieTimeHeatmapChart"),D=T("TheaterBarChart"),A=T("VersionBarChart"),V=T("AreaPieChart"),E=T("VanTag"),Q=T("VanCollapseItem"),le=T("VanCollapse"),re=T("VanSkeleton");return S(),I("div",{class:Xt(a.isReady?"pb-16":"py-4")},[h(re,{title:"",row:10,loading:!a.isReady,round:""},{default:x(()=>[h(k,{active:a.activeTab,"onUpdate:active":d[1]||(d[1]=y=>a.activeTab=y),sticky:"",border:""},{default:x(()=>[h(_,{title:"資料",name:"data",to:{query:{tab:"data"},replace:!0}},{default:x(()=>[P("div",Ta,[h(i,{records:a.records},null,8,["records"])]),h(k,{"offset-top":44,"line-height":1,scrollspy:"",sticky:"",border:""},{default:x(()=>[(S(!0),I(q,null,X(a.arrayByYear,y=>(S(),H(_,{key:y.id,title:`${y.id}`},{default:x(()=>[P("div",Ma,[h(g,{border:""},{title:x(()=>[P("div",Pa,R(y.id),1),P("div",Oa,[h(c,{id:`js-contribution-${y.id}`,records:y.records},null,8,["id","records"])]),h(i,{records:y.records},null,8,["records"])]),default:x(()=>[(S(!0),I(q,null,X(y.records,z=>(S(),H(m,{key:`${z.date}_${z.title}`,record:z},null,8,["record"]))),128))]),_:2},1024)])]),_:2},1032,["title"]))),128))]),_:1})]),_:1}),h(_,{title:"場數",name:"frequency",to:{query:{tab:"frequency"},replace:!0}},{default:x(()=>[P("div",Da,[h(k,{"line-height":1,border:""},{default:x(()=>[h(_,{title:"全部"},{default:x(()=>[h($,{id:"total",records:a.records},null,8,["records"]),d[2]||(d[2]=P("div",{class:"text-center text-xs my-2"}," 累積下來每個月各看了幾場電影 ",-1)),h(M,{id:"js-frequency-all",records:a.records},null,8,["records"])]),_:1}),(S(!0),I(q,null,X(a.arrayByYear,y=>(S(),H(_,{key:y.id,title:`${y.id}`},{default:x(()=>[P("div",Ra,R(y.id)+" 每個月各看了幾場電影 ",1),h(M,{id:`js-frequency-${y.id}`,records:y.records},null,8,["id","records"])]),_:2},1032,["title"]))),128))]),_:1})])]),_:1}),h(_,{title:"時間",name:"time",to:{query:{tab:"time"},replace:!0}},{default:x(()=>[P("div",Aa,[h(k,{"line-height":1,border:""},{default:x(()=>[h(_,{title:"全部"},{default:x(()=>[h(j,{id:"js-heatmap-all",records:a.records},null,8,["records"])]),_:1}),(S(!0),I(q,null,X(a.arrayByYear,y=>(S(),H(_,{key:y.id,title:`${y.id}`},{default:x(()=>[h(j,{id:`js-heatmap-${y.id}`,records:y.records},null,8,["id","records"])]),_:2},1032,["title"]))),128))]),_:1})])]),_:1}),h(_,{title:"影廳",name:"theater",to:{query:{tab:"theater"},replace:!0}},{default:x(()=>[P("div",Ia,[h(k,{"line-height":1,border:""},{default:x(()=>[h(_,{title:"全部"},{default:x(()=>[h(D,{id:"js-theater-bar-all",records:a.records},null,8,["records"])]),_:1}),(S(!0),I(q,null,X(a.arrayByYear,y=>(S(),H(_,{key:y.id,title:`${y.id}`},{default:x(()=>[h(D,{id:`js-theater-bar-${y.id}`,records:y.records},null,8,["id","records"])]),_:2},1032,["title"]))),128))]),_:1})])]),_:1}),h(_,{title:"版本",name:"version",to:{query:{tab:"version"},replace:!0}},{default:x(()=>[P("div",ja,[h(k,{"line-height":1,border:""},{default:x(()=>[h(_,{title:"全部"},{default:x(()=>[h(A,{id:"js-version-bar-all",records:a.records},null,8,["records"])]),_:1}),(S(!0),I(q,null,X(a.arrayByYear,y=>(S(),H(_,{key:y.id,title:`${y.id}`},{default:x(()=>[h(A,{id:`js-version-bar-${y.id}`,records:y.records},null,8,["id","records"])]),_:2},1032,["title"]))),128))]),_:1})])]),_:1}),h(_,{title:"國別",name:"area",to:{query:{tab:"area"},replace:!0}},{default:x(()=>[P("div",Ea,[h(k,{"line-height":1,border:""},{default:x(()=>[h(_,{title:"全部"},{default:x(()=>[h(V,{id:"js-area-pie-all",records:a.records},null,8,["records"])]),_:1}),(S(!0),I(q,null,X(a.arrayByYear,y=>(S(),H(_,{key:y.id,title:`${y.id}`},{default:x(()=>[h(V,{id:`js-area-pie-${y.id}`,records:y.records},null,8,["id","records"])]),_:2},1032,["title"]))),128))]),_:1})])]),_:1}),h(_,{title:"多刷",name:"secondtime",to:{query:{tab:"secondtime"},replace:!0}},{default:x(()=>[P("div",za,[h(le,{modelValue:a.activeCollapse,"onUpdate:modelValue":d[0]||(d[0]=y=>a.activeCollapse=y),accordion:""},{default:x(()=>[(S(!0),I(q,null,X(a.arrayByTitle,y=>(S(),H(Q,{key:y.title,name:y.title},{title:x(()=>[P("div",Va,[h(E,{class:"mr-2",type:"primary",plain:"",size:"medium"},{default:x(()=>[ge(" x "+R(y.count),1)]),_:2},1024),P("span",La,R(y.title),1)])]),default:x(()=>[P("div",qa,[(S(!0),I(q,null,X(y.records,z=>(S(),H(m,{key:`${z.date}_${z.title}`,record:z,"hide-title":"",size:"normal"},null,8,["record"]))),128))])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["active"])]),_:1},8,["loading"])],2)}const Za=W(Ba,[["render",Na]]);export{Za as default};

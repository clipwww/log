import{d as x,_ as M,n as L,T as S,h as V,C as j,i as R,S as F,k as T,r as q}from"./index-7ebb4176.js";import{L as z,c as w}from"./LineChart-d5c35017.js";import{d as D,q as i,_ as Y,L as u,M as f,N as k,S as b,Q as t,R as c,ad as E,f as y,P as v,a1 as G,F as A,X as B}from"./index-668e3e2e.js";import"./on-popup-reopen-dfed5c31.js";const N=D({components:{LineChart:z},props:{id:{type:String,default:"js-line"},logs:{type:Array,required:!0}},setup(o){const r=Array(12).fill("").map((s,e)=>e),l=i(()=>M(o.logs,s=>x(s.date).year())),d=i(()=>Object.keys(l.value).sort((s,e)=>+s>+e?1:-1).map((s,e)=>{const m=M(l.value[s],_=>x(_.date).month());return{type:"line",label:s,data:r.map(_=>{var a;return((a=m[_])==null?void 0:a.reduce((n,C)=>n+=C.steps,0))??0}),borderColor:w[e%w.length],backgroundColor:w[e%w.length],fill:!1}})),p=r.map(s=>x().month(s).format("MMM"));return{datasets:d,labels:p}}});function O(o,r,l,d,p,s){const e=u("LineChart");return f(),k(e,{id:o.id,key:o.id,datasets:o.datasets,labels:o.labels},null,8,["id","datasets","labels"])}const H=Y(N,[["render",O]]),P={class:"my-1"},Q=D({__name:"ActivityDashboard",props:{logs:{type:Array,required:!0}},setup(o){const r=o,l=i(()=>r.logs.reduce((a,n)=>a+=n.steps,0)),d=i(()=>r.logs.reduce((a,n)=>a+=n.calories,0)),p=i(()=>(r.logs.reduce((a,n)=>a+=n.distance,0)/1e3).toFixed(2)),s=i(()=>r.logs.reduce((a,n)=>a?n.steps>(a==null?void 0:a.steps)?n:a:n)),e=L(s.value.date,"YYYY/MM/DD"),m=i(()=>Math.floor(l.value/r.logs.length)),_=i(()=>Math.floor(d.value/r.logs.length));return(a,n)=>(f(),b("div",null,[t("div",null,"總共走了 "+c(l.value)+" 步，消耗總熱量 "+c(d.value)+" kcal",1),t("div",null,"總距離 "+c(p.value)+" km",1),t("div",P,"平均每天 "+c(m.value)+" 步，消耗熱量 "+c(_.value)+" kcal",1),t("div",null,"走最多步的一天是 "+c(E(e))+" ，共 "+c(s.value.steps)+" 步",1)]))}}),X=D({components:{VanTabs:S,VanTab:V,VanCell:j,VanCellGroup:R,VanSkeleton:F,ActivityLineChart:H,ActivityDashboard:Q},setup(){const{state:o,isReady:r}=T(q("mi/activity"),{success:!1,resultMessage:"",resultCode:"",resultException:"",items:[]}),l=i(()=>o.value.items),d=i(()=>{const s=M(l.value,e=>x(e.date).year());return Object.keys(s).sort((e,m)=>+e>+m?-1:1).map(e=>({id:+e,logs:s[e]}))});function p(s,e){return x(s).format(e)}return{isReady:r,arrayByYear:d,logs:l,formatDate:p}}}),I={class:"max-w-2xl mx-auto"},J={class:"text-center"},K={class:"mt-3 mb-1"},U={class:"text-center pl-2 pr-5 border-r w-20"},W={class:"text-xs text-gray-500"},Z={class:"text-gray-700 mb-1"},tt={class:"font-bold text-lg"},et={class:"flex items-center justify-around -mr-3"},st={class:"flex flex-col items-center justify-center px-1"},ot=t("div",{class:"flex items-center text-orange-500"},[t("svg",{class:"iconify iconify--mdi mr-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[t("path",{d:"M19.03 7.39l1.42-1.42c-.45-.51-.9-.97-1.41-1.41L17.62 6c-1.55-1.26-3.5-2-5.62-2a9 9 0 0 0 0 18c5 0 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V7h2v7m2-13H9v2h6V1z",fill:"currentColor"})]),t("span",null,"步數")],-1),at={class:"text-center mt-1"},nt={class:"text-2xl font-bold mr-1"},ct=t("span",{class:"text-gray-500 mr-1"},"步",-1),rt={class:"flex flex-col items-center justify-center px-1"},lt=t("div",{class:"flex items-center text-orange-500"},[t("svg",{class:"iconify iconify--mdi mr-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[t("path",{d:"M17.66 11.2c-.23-.3-.51-.56-.77-.82c-.67-.6-1.43-1.03-2.07-1.66C13.33 7.26 13 4.85 13.95 3c-.95.23-1.78.75-2.49 1.32c-2.59 2.08-3.61 5.75-2.39 8.9c.04.1.08.2.08.33c0 .22-.15.42-.35.5c-.23.1-.47.04-.66-.12a.58.58 0 0 1-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C5.78 10 4.87 12.3 5 14.47c.06.5.12 1 .29 1.5c.14.6.41 1.2.71 1.73c1.08 1.73 2.95 2.97 4.96 3.22c2.14.27 4.43-.12 6.07-1.6c1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6c-1.12.4-2.24-.16-2.9-.82c1.19-.28 1.9-1.16 2.11-2.05c.17-.8-.15-1.46-.28-2.23c-.12-.74-.1-1.37.17-2.06c.19.38.39.76.63 1.06c.77 1 1.98 1.44 2.24 2.8c.04.14.06.28.06.43c.03.82-.33 1.72-.93 2.27z",fill:"currentColor"})]),t("span",null,"距離")],-1),it={class:"text-center mt-1"},dt={class:"text-2xl font-bold mr-1"},ut=t("span",{class:"text-gray-500"},"km",-1),pt={class:"flex flex-col items-center justify-center px-1"},mt=t("div",{class:"flex items-center text-orange-500"},[t("svg",{class:"iconify iconify--mdi mr-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[t("path",{d:"M17.66 11.2c-.23-.3-.51-.56-.77-.82c-.67-.6-1.43-1.03-2.07-1.66C13.33 7.26 13 4.85 13.95 3c-.95.23-1.78.75-2.49 1.32c-2.59 2.08-3.61 5.75-2.39 8.9c.04.1.08.2.08.33c0 .22-.15.42-.35.5c-.23.1-.47.04-.66-.12a.58.58 0 0 1-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C5.78 10 4.87 12.3 5 14.47c.06.5.12 1 .29 1.5c.14.6.41 1.2.71 1.73c1.08 1.73 2.95 2.97 4.96 3.22c2.14.27 4.43-.12 6.07-1.6c1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6c-1.12.4-2.24-.16-2.9-.82c1.19-.28 1.9-1.16 2.11-2.05c.17-.8-.15-1.46-.28-2.23c-.12-.74-.1-1.37.17-2.06c.19.38.39.76.63 1.06c.77 1 1.98 1.44 2.24 2.8c.04.14.06.28.06.43c.03.82-.33 1.72-.93 2.27z",fill:"currentColor"})]),t("span",null,"熱量")],-1),_t={class:"text-center mt-1"},ht={class:"text-2xl font-bold mr-1"},vt=t("span",{class:"text-gray-500"},"kcal",-1);function ft(o,r,l,d,p,s){const e=u("ActivityLineChart"),m=u("ActivityDashboard"),_=u("van-cell"),a=u("van-cell-group"),n=u("van-tab"),C=u("van-tabs"),$=u("van-skeleton");return f(),b("div",{class:G(o.isReady?"":"py-4")},[y($,{title:"",row:10,loading:!o.isReady,round:""},{default:v(()=>[y(e,{logs:o.logs},null,8,["logs"]),y(C,{"line-height":1,sticky:"",border:""},{default:v(()=>[(f(!0),b(A,null,B(o.arrayByYear,g=>(f(),k(n,{title:`${g.id}`,key:g.id},{default:v(()=>[t("div",I,[y(a,{border:""},{title:v(()=>[t("div",J,c(g.id),1),t("div",K,[y(m,{logs:g.logs},null,8,["logs"])])]),default:v(()=>[(f(!0),b(A,null,B(g.logs,h=>(f(),k(_,{center:"",border:"",key:h.id},{icon:v(()=>[t("div",U,[t("div",W,c(o.formatDate(h.date,"YYYY")),1),t("div",Z,c(o.formatDate(h.date,"MMMM")),1),t("div",tt,c(o.formatDate(h.date,"D")),1)])]),title:v(()=>[t("div",et,[t("div",st,[ot,t("div",at,[t("span",nt,c(h.steps),1),ct])]),t("div",rt,[lt,t("div",it,[t("span",dt,c((h.distance/1e3).toFixed(2)),1),ut])]),t("div",pt,[mt,t("div",_t,[t("span",ht,c(h.calories),1),vt])])])]),_:2},1024))),128))]),_:2},1024)])]),_:2},1032,["title"]))),128))]),_:1})]),_:1},8,["loading"])],2)}const bt=Y(X,[["render",ft]]);export{bt as default};

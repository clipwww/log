import{h as B,_ as b,C as S,T as L,c as T,e as j}from"./groupBy-B5JDjmjc.js";import{d as k,s as i,U as C,Q as t,R as l,aa as R,P as h,_ as D,L as M,O as u,f as x,N as g,F as V,X as A,a1 as F}from"./index-DfSfAmJg.js";import{L as G,c as w}from"./LineChart-DSbpwIdc.js";import{d as y,S as z,C as q,r as E}from"./index-9J0OcJMf.js";import"./on-popup-reopen-DBlk2QAn.js";import"./interceptor-CR4HCnZu.js";const N={class:"my-1"},O=k({__name:"ActivityDashboard",props:{logs:{type:Array,required:!0}},setup(a){const e=a,c=i(()=>e.logs.reduce((n,r)=>n+=r.steps,0)),d=i(()=>e.logs.reduce((n,r)=>n+=r.calories,0)),m=i(()=>(e.logs.reduce((n,r)=>n+=r.distance,0)/1e3).toFixed(2)),o=i(()=>e.logs.reduce((n,r)=>n?r.steps>n?.steps?r:n:r)),s=B(o.value.date,"YYYY/MM/DD"),p=i(()=>Math.floor(c.value/e.logs.length)),f=i(()=>Math.floor(d.value/e.logs.length));return(n,r)=>(h(),C("div",null,[t("div",null,"總共走了 "+l(c.value)+" 步，消耗總熱量 "+l(d.value)+" kcal",1),t("div",null,"總距離 "+l(m.value)+" km",1),t("div",N," 平均每天 "+l(p.value)+" 步，消耗熱量 "+l(f.value)+" kcal ",1),t("div",null,"走最多步的一天是 "+l(R(s))+" ，共 "+l(o.value.steps)+" 步",1)]))}}),H=k({components:{LineChart:G},props:{id:{type:String,default:"js-line"},logs:{type:Array,required:!0}},setup(a){const e=Array.from({length:12}).fill("").map((o,s)=>s),c=i(()=>b(a.logs,o=>y(o.date).year())),d=i(()=>Object.keys(c.value).sort((o,s)=>+o>+s?1:-1).map((o,s)=>{const p=b(c.value[o],f=>y(f.date).month());return{type:"line",label:o,data:e.map(f=>p[f]?.reduce((n,r)=>n+=r.steps,0)??0),borderColor:w[s%w.length],backgroundColor:w[s%w.length],fill:!1}})),m=e.map(o=>y().month(o).format("MMM"));return{datasets:d,labels:m}}});function P(a,e,c,d,m,o){const s=u("LineChart");return h(),M(s,{id:a.id,key:a.id,datasets:a.datasets,labels:a.labels},null,8,["id","datasets","labels"])}const Q=D(H,[["render",P]]),U=k({components:{VanTabs:T,VanTab:L,VanCell:q,VanCellGroup:S,VanSkeleton:z,ActivityLineChart:Q,ActivityDashboard:O},setup(){const{state:a,isReady:e}=j(E("mi/activity"),{success:!1,resultMessage:"",resultCode:"",resultException:"",items:[]}),c=i(()=>a.value.items),d=i(()=>{const o=b(c.value,s=>y(s.date).year());return Object.keys(o).sort((s,p)=>+s>+p?-1:1).map(s=>({id:+s,logs:o[s]}))});function m(o,s){return y(o).format(s)}return{isReady:e,arrayByYear:d,logs:c,formatDate:m}}}),X={class:"max-w-2xl mx-auto"},I={class:"text-center"},J={class:"mt-3 mb-1"},K={class:"text-center pl-2 pr-5 border-r w-20"},W={class:"text-xs text-gray-500"},Z={class:"text-gray-700 mb-1"},tt={class:"font-bold text-lg"},et={class:"flex items-center justify-around -mr-3"},st={class:"flex flex-col items-center justify-center px-1"},ot={class:"text-center mt-1"},at={class:"text-2xl font-bold mr-1"},nt={class:"flex flex-col items-center justify-center px-1"},rt={class:"text-center mt-1"},lt={class:"text-2xl font-bold mr-1"},ct={class:"flex flex-col items-center justify-center px-1"},it={class:"text-center mt-1"},dt={class:"text-2xl font-bold mr-1"};function ut(a,e,c,d,m,o){const s=u("ActivityLineChart"),p=u("ActivityDashboard"),f=u("VanCell"),n=u("VanCellGroup"),r=u("VanTab"),Y=u("VanTabs"),$=u("VanSkeleton");return h(),C("div",{class:F(a.isReady?"":"py-4")},[x($,{title:"",row:10,loading:!a.isReady,round:""},{default:g(()=>[x(s,{logs:a.logs},null,8,["logs"]),x(Y,{"line-height":1,sticky:"",border:""},{default:g(()=>[(h(!0),C(V,null,A(a.arrayByYear,_=>(h(),M(r,{key:_.id,title:`${_.id}`},{default:g(()=>[t("div",X,[x(n,{border:""},{title:g(()=>[t("div",I,l(_.id),1),t("div",J,[x(p,{logs:_.logs},null,8,["logs"])])]),default:g(()=>[(h(!0),C(V,null,A(_.logs,v=>(h(),M(f,{key:v.id,center:"",border:""},{icon:g(()=>[t("div",K,[t("div",W,l(a.formatDate(v.date,"YYYY")),1),t("div",Z,l(a.formatDate(v.date,"MMMM")),1),t("div",tt,l(a.formatDate(v.date,"D")),1)])]),title:g(()=>[t("div",et,[t("div",st,[e[1]||(e[1]=t("div",{class:"flex items-center text-orange-500"},[t("svg",{class:"iconify iconify--mdi mr-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[t("path",{d:"M19.03 7.39l1.42-1.42c-.45-.51-.9-.97-1.41-1.41L17.62 6c-1.55-1.26-3.5-2-5.62-2a9 9 0 0 0 0 18c5 0 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V7h2v7m2-13H9v2h6V1z",fill:"currentColor"})]),t("span",null,"步數")],-1)),t("div",ot,[t("span",at,l(v.steps),1),e[0]||(e[0]=t("span",{class:"text-gray-500 mr-1"},"步",-1))])]),t("div",nt,[e[3]||(e[3]=t("div",{class:"flex items-center text-orange-500"},[t("svg",{class:"iconify iconify--mdi mr-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[t("path",{d:"M17.66 11.2c-.23-.3-.51-.56-.77-.82c-.67-.6-1.43-1.03-2.07-1.66C13.33 7.26 13 4.85 13.95 3c-.95.23-1.78.75-2.49 1.32c-2.59 2.08-3.61 5.75-2.39 8.9c.04.1.08.2.08.33c0 .22-.15.42-.35.5c-.23.1-.47.04-.66-.12a.58.58 0 0 1-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C5.78 10 4.87 12.3 5 14.47c.06.5.12 1 .29 1.5c.14.6.41 1.2.71 1.73c1.08 1.73 2.95 2.97 4.96 3.22c2.14.27 4.43-.12 6.07-1.6c1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6c-1.12.4-2.24-.16-2.9-.82c1.19-.28 1.9-1.16 2.11-2.05c.17-.8-.15-1.46-.28-2.23c-.12-.74-.1-1.37.17-2.06c.19.38.39.76.63 1.06c.77 1 1.98 1.44 2.24 2.8c.04.14.06.28.06.43c.03.82-.33 1.72-.93 2.27z",fill:"currentColor"})]),t("span",null,"距離")],-1)),t("div",rt,[t("span",lt,l((v.distance/1e3).toFixed(2)),1),e[2]||(e[2]=t("span",{class:"text-gray-500"},"km",-1))])]),t("div",ct,[e[5]||(e[5]=t("div",{class:"flex items-center text-orange-500"},[t("svg",{class:"iconify iconify--mdi mr-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[t("path",{d:"M17.66 11.2c-.23-.3-.51-.56-.77-.82c-.67-.6-1.43-1.03-2.07-1.66C13.33 7.26 13 4.85 13.95 3c-.95.23-1.78.75-2.49 1.32c-2.59 2.08-3.61 5.75-2.39 8.9c.04.1.08.2.08.33c0 .22-.15.42-.35.5c-.23.1-.47.04-.66-.12a.58.58 0 0 1-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C5.78 10 4.87 12.3 5 14.47c.06.5.12 1 .29 1.5c.14.6.41 1.2.71 1.73c1.08 1.73 2.95 2.97 4.96 3.22c2.14.27 4.43-.12 6.07-1.6c1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6c-1.12.4-2.24-.16-2.9-.82c1.19-.28 1.9-1.16 2.11-2.05c.17-.8-.15-1.46-.28-2.23c-.12-.74-.1-1.37.17-2.06c.19.38.39.76.63 1.06c.77 1 1.98 1.44 2.24 2.8c.04.14.06.28.06.43c.03.82-.33 1.72-.93 2.27z",fill:"currentColor"})]),t("span",null,"熱量")],-1)),t("div",it,[t("span",dt,l(v.calories),1),e[4]||(e[4]=t("span",{class:"text-gray-500"},"kcal",-1))])])])]),_:2},1024))),128))]),_:2},1024)])]),_:2},1032,["title"]))),128))]),_:1})]),_:1},8,["loading"])],2)}const _t=D(U,[["render",ut]]);export{_t as default};
